<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Pythran 0.8.3 is out!</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="serge-sans-paille and other pythraners">

    <!-- Le styles -->
    <link rel="stylesheet" href="./theme/css/bootstrap.min.css" type="text/css" />
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
      .tag-1 {
        font-size: 13pt;
      }
      .tag-2 {
        font-size: 10pt;
      }
      .tag-2 {
        font-size: 8pt;
      }
      .tag-4 {
        font-size: 6pt;
     }
    </style>
    <link href="./theme/css/bootstrap-responsive.min.css" rel="stylesheet">
        <link href="./theme/css/font-awesome.css" rel="stylesheet">

    <link href="./theme/css/pygments.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="./theme/images/favicon.ico">
    <link rel="apple-touch-icon" href="./theme/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="./theme/images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="./theme/images/apple-touch-icon-114x114.png">

    <link href="./" type="application/atom+xml" rel="alternate" title="Pythran stories ATOM Feed" />

  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="./index.html">Pythran stories </a>
          <div class="nav-collapse">
            <ul class="nav">
                          <li class="divider-vertical"></li>
                  <li >
                    <a href="./category/benchmark.html">
						<i class="icon-folder-open icon-large"></i>benchmark
					</a>
                  </li>
                  <li >
                    <a href="./category/compilation.html">
						<i class="icon-folder-open icon-large"></i>compilation
					</a>
                  </li>
                  <li >
                    <a href="./category/cython.html">
						<i class="icon-folder-open icon-large"></i>cython
					</a>
                  </li>
                  <li >
                    <a href="./category/engineering.html">
						<i class="icon-folder-open icon-large"></i>engineering
					</a>
                  </li>
                  <li >
                    <a href="./category/examples.html">
						<i class="icon-folder-open icon-large"></i>examples
					</a>
                  </li>
                  <li >
                    <a href="./category/optimisation.html">
						<i class="icon-folder-open icon-large"></i>optimisation
					</a>
                  </li>
                  <li class="active">
                    <a href="./category/release.html">
						<i class="icon-folder-open icon-large"></i>release
					</a>
                  </li>

                          <ul class="nav pull-right">
                                <li><a href="./archives.html"><i class="icon-th-list"></i>Archives</a></li>
                          </ul>

            </ul>
            <!--<p class="navbar-text pull-right">Logged in as <a href="#">username</a></p>-->
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row">
        <div class="span9" id="content">
<section id="content">
        <article>
                <header>
                        <h1>
                                <a href=""
                                        rel="bookmark"
                                        title="Permalink to Pythran 0.8.3 is out!">
                                        Pythran 0.8.3 is out!
                                </a>
                        </h1>
                </header>
                <div class="entry-content">
                <div class="well">
<footer class="post-info">
<span class="label">Date</span>
<abbr class="published" title="2017-10-22T00:00:00+02:00">
        <i class="icon-calendar"></i>Sun 22 October 2017
</abbr>
<span class="label">By</span>
<a href="./author/serge-sans-paille.html"><i class="icon-user"></i>serge-sans-paille</a>
<span class="label">Category</span>
<a href="./category/release.html"><i class="icon-folder-open"></i>release</a>.


</footer><!-- /.post-info -->                </div>
                <p>This blogpost originally was a Jupyter Notebook. You can <a href="notebooks/pythran - 0.8.3.ipynb">download it</a> if you want. The conversion was done using <code>nbconvert</code> and a <a href="notebooks/nbmarkdown.tpl">custom template</a> to match the style of the other part of the blog.</p>
<h1>Pythran minor version bump</h1>
<p>So Pythran just got a version bump. The primary goal of this version is to match the upgrade of the <code>networkx</code> dependency. Pythran now requires <code>networkx&gt;=2.0</code>.</p>
<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">pythran</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">pythran</span><span class="o">.</span><span class="n">__version__</span>
</pre></div>


<div class="highlight"><pre><span></span>&#39;0.8.3&#39;
</pre></div>


<p>A few extra stuff are bundled in this new version, let's explore them using this notebook.</p>
<h1>Fix Jupyter magic</h1>
<p>Pythran comes with a Jupyter magic cell extension, very similar to Cython's, that makes it possible to compile Python code with Pythran within a cell.</p>
<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="o">%</span><span class="n">load_ext</span> <span class="n">pythran</span><span class="o">.</span><span class="n">magic</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="o">%%</span><span class="n">pythran</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c1">#pythran export fma(float[:], float[:], float[:]))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">fma</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
<span class="o">...</span>     <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">c</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">100000</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="o">%</span><span class="n">timeit</span> <span class="n">fma</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>89.7 µs ± 3.27 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each)
</pre></div>


<p>There was a bug when a cell was recompiled with the same textual content, but a new set of options. This is fixed in this version, as showcased by the following cell that compiles the same code with more aggressive optimization flags, which results in faster (vectorized) code.</p>
<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="o">%%</span><span class="n">pythran</span> <span class="o">-</span><span class="n">march</span><span class="o">=</span><span class="n">native</span> <span class="o">-</span><span class="n">Ofast</span> <span class="o">-</span><span class="n">DUSE_BOOST_SIMD</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c1">#pythran export fma(float[:], float[:], float[:]))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">fma</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
<span class="o">...</span>     <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">c</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="o">%</span><span class="n">timeit</span> <span class="n">fma</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>74 µs ± 288 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
</pre></div>


<h1>Support <code>out</code> param for <code>np.sum</code></h1>
<p>Many <code>numpy</code> operation accept an <code>out</code> parameter, as an alternative output array to place the result of the computation. Pythran now supports this parameter for the <code>numpy.sum</code> and <code>numpy.prod</code> operations. It makes it possible to avoid an extra copy.</p>
<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="n">n</span><span class="p">,</span><span class="n">n</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="o">%%</span><span class="n">pythran</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c1">#pythran export isum(float[:, :], float[:])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">isum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="o">...</span>     <span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="o">...</span>     <span class="n">y</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="o">...</span>     <span class="k">return</span> <span class="n">y</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="o">%</span><span class="n">timeit</span> <span class="n">isum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>757 µs ± 11.5 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
</pre></div>


<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="o">%%</span><span class="n">pythran</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c1">#pythran export isum(float[:, :], float[:])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">isum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="o">...</span>     <span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="o">...</span>     <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">y</span><span class="p">)</span>
<span class="o">...</span>     <span class="k">return</span> <span class="n">y</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="o">%</span><span class="n">timeit</span> <span class="n">isum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>314 ns ± 0.574 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
</pre></div>


<h1>Partial Constant Folding</h1>
<p>Pythran supports (interprocedural) constant folding since its very start, and it now also supports a degraded version that folds some operation on <code>list</code> and <code>tuples</code> when only part of the arguments is constant.</p>
<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">gast</span> <span class="kn">as</span> <span class="nn">ast</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">pythran</span> <span class="kn">import</span> <span class="n">passmanager</span><span class="p">,</span> <span class="n">backend</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">pythran.optimizations</span> <span class="kn">import</span> <span class="n">PartialConstantFolding</span>
<span class="o">...</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="n">code</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">&gt;&gt;&gt; def replicate(n):</span>
<span class="s1">...     return [n] * 8</span>
<span class="s1">&gt;&gt;&gt; &#39;&#39;&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">node</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pm</span> <span class="o">=</span> <span class="n">passmanager</span><span class="o">.</span><span class="n">PassManager</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">status</span><span class="p">,</span> <span class="n">node</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">PartialConstantFolding</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">pm</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">backend</span><span class="o">.</span><span class="n">Python</span><span class="p">,</span> <span class="n">node</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre><span></span>def replicate(n):
    return [n, n, n, n, n, n, n, n]
</pre></div>


<h1>Better Cython integration</h1>
<p>Since version 0.8.1, and thanks to the work of <a href="https://twitter.com/adriengnt">Adrien Guinet</a> funded by <a href="http://opendreamkit.org/">OpenDreamKit</a>, Cython has a Pythran mode to delegate Numpy expression computation to the Pythran engine. It's much more stable now, even if it does <em>not</em> mean stable :-).</p>
<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="o">%</span><span class="n">load_ext</span> <span class="n">Cython</span>
</pre></div>


<p>Note that the following cell calls Pythran through Cython though Jupyter magic. What a wonderful world!</p>
<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="o">%%</span><span class="n">cython</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c1"># cython: language=c++</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c1"># cython: np_pythran=True</span>
<span class="o">...</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">cimport</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">cnp</span>
<span class="o">...</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">tax</span><span class="p">(</span><span class="n">cnp</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">double</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mi">1</span><span class="p">]</span> <span class="n">d</span><span class="p">):</span>
<span class="o">...</span>     <span class="n">tax_seg1</span> <span class="o">=</span> <span class="n">d</span><span class="p">[(</span><span class="n">d</span> <span class="o">&gt;</span> <span class="mi">256303</span><span class="p">)]</span> <span class="o">*</span> <span class="mf">0.45</span> <span class="o">-</span> <span class="mf">16164.53</span>
<span class="o">...</span>     <span class="n">tax_seg2</span> <span class="o">=</span> <span class="n">d</span><span class="p">[(</span><span class="n">d</span> <span class="o">&gt;</span> <span class="mi">54057</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">d</span> <span class="o">&lt;=</span> <span class="mi">256303</span><span class="p">)]</span> <span class="o">*</span> <span class="mf">0.42</span> <span class="o">-</span> <span class="mf">8475.44</span>
<span class="o">...</span>     <span class="n">seg3</span> <span class="o">=</span> <span class="n">d</span><span class="p">[(</span><span class="n">d</span> <span class="o">&gt;</span> <span class="mi">13769</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">d</span> <span class="o">&lt;=</span> <span class="mi">54057</span><span class="p">)]</span> <span class="o">-</span> <span class="mi">13769</span>
<span class="o">...</span>     <span class="n">seg4</span> <span class="o">=</span> <span class="n">d</span><span class="p">[(</span><span class="n">d</span> <span class="o">&gt;</span> <span class="mi">8820</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">d</span> <span class="o">&lt;=</span> <span class="mi">13769</span><span class="p">)]</span> <span class="o">-</span> <span class="mi">8820</span>
<span class="o">...</span>     <span class="n">prog_seg3</span> <span class="o">=</span> <span class="n">seg3</span> <span class="o">*</span> <span class="mf">0.0000022376</span> <span class="o">+</span> <span class="mf">0.2397</span>
<span class="o">...</span>     <span class="n">prog_seg4</span> <span class="o">=</span> <span class="n">seg4</span> <span class="o">*</span> <span class="mf">0.0000100727</span> <span class="o">+</span> <span class="mf">0.14</span>
<span class="o">...</span>     <span class="k">return</span> <span class="p">(</span>
<span class="o">...</span>         <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">tax_seg1</span><span class="p">)</span> <span class="o">+</span>
<span class="o">...</span>         <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">tax_seg2</span><span class="p">)</span> <span class="o">+</span>
<span class="o">...</span>         <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">seg3</span> <span class="o">*</span> <span class="n">prog_seg3</span> <span class="o">+</span> <span class="mf">939.57</span><span class="p">)</span> <span class="o">+</span>
<span class="o">...</span>         <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">seg4</span> <span class="o">*</span> <span class="n">prog_seg4</span><span class="p">)</span>
<span class="o">...</span>     <span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="o">%</span><span class="n">timeit</span> <span class="n">tax</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>22.9 µs ± 39.4 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
</pre></div>


<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">tax_numpy</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
<span class="o">...</span>     <span class="n">tax_seg1</span> <span class="o">=</span> <span class="n">d</span><span class="p">[(</span><span class="n">d</span> <span class="o">&gt;</span> <span class="mi">256303</span><span class="p">)]</span> <span class="o">*</span> <span class="mf">0.45</span> <span class="o">-</span> <span class="mf">16164.53</span>
<span class="o">...</span>     <span class="n">tax_seg2</span> <span class="o">=</span> <span class="n">d</span><span class="p">[(</span><span class="n">d</span> <span class="o">&gt;</span> <span class="mi">54057</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">d</span> <span class="o">&lt;=</span> <span class="mi">256303</span><span class="p">)]</span> <span class="o">*</span> <span class="mf">0.42</span> <span class="o">-</span> <span class="mf">8475.44</span>
<span class="o">...</span>     <span class="n">seg3</span> <span class="o">=</span> <span class="n">d</span><span class="p">[(</span><span class="n">d</span> <span class="o">&gt;</span> <span class="mi">13769</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">d</span> <span class="o">&lt;=</span> <span class="mi">54057</span><span class="p">)]</span> <span class="o">-</span> <span class="mi">13769</span>
<span class="o">...</span>     <span class="n">seg4</span> <span class="o">=</span> <span class="n">d</span><span class="p">[(</span><span class="n">d</span> <span class="o">&gt;</span> <span class="mi">8820</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">d</span> <span class="o">&lt;=</span> <span class="mi">13769</span><span class="p">)]</span> <span class="o">-</span> <span class="mi">8820</span>
<span class="o">...</span>     <span class="n">prog_seg3</span> <span class="o">=</span> <span class="n">seg3</span> <span class="o">*</span> <span class="mf">0.0000022376</span> <span class="o">+</span> <span class="mf">0.2397</span>
<span class="o">...</span>     <span class="n">prog_seg4</span> <span class="o">=</span> <span class="n">seg4</span> <span class="o">*</span> <span class="mf">0.0000100727</span> <span class="o">+</span> <span class="mf">0.14</span>
<span class="o">...</span>     <span class="k">return</span> <span class="p">(</span>
<span class="o">...</span>         <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">tax_seg1</span><span class="p">)</span> <span class="o">+</span>
<span class="o">...</span>         <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">tax_seg2</span><span class="p">)</span> <span class="o">+</span>
<span class="o">...</span>         <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">seg3</span> <span class="o">*</span> <span class="n">prog_seg3</span> <span class="o">+</span> <span class="mf">939.57</span><span class="p">)</span> <span class="o">+</span>
<span class="o">...</span>         <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">seg4</span> <span class="o">*</span> <span class="n">prog_seg4</span><span class="p">)</span>
<span class="o">...</span>     <span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="o">%</span><span class="n">timeit</span> <span class="n">tax_numpy</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>28.9 µs ± 90 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
</pre></div>


<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">tax</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="o">-</span> <span class="n">tax_numpy</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre><span></span>0.0
</pre></div>


<h1>That's all folks</h1>
<p>The release is available on <a href="https://github.com/serge-sans-paille/pythran/tree/0.8.3">Github</a>, on <a href="https://pypi.python.org/pypi/pythran">PyPI</a> and <a href="https://anaconda.org/serge-sans-paille/pythran">Conda</a>.</p>
<p>Thanks to <a href="https://github.com/Finistere">Finistere</a> for his help, to <a href="https://github.com/paugier">paugier</a> and <a href="https://github.com/ashwinvis">ashwinvis</a> for their bug reports.</p>
<p>And if you too feel like contributing, the <a href="https://github.com/serge-sans-paille/pythran/issues">bug tracker</a> is a lively place ;-)</p>
                </div><!-- /.entry-content -->
        </article>
</section>
        </div><!--/span-->

                <div class="span3 well sidebar-nav" id="sidebar">
<ul class="nav nav-list">
<li class="nav-header"><h4><i class="icon-external-link"></i>blogroll</h4></li>
    <li><a href="http://pythonhosted.org/pythran"><i class="icon-external-link"></i>Pythran Doc</a></li>
    <li><a href="https://pypi.python.org/pypi/pythran"><i class="icon-external-link"></i>Pythran on PyPI</a></li>
<li class="nav-header"><h4><i class="icon-home icon-large"></i> social</h4></li>
<li><a href="./feeds/all.atom.xml" rel="alternate"><i class="icon-bookmark icon-large"></i>atom feed</a></li>
    <li><a href="https://github.com/serge-sans-paille/pythran"><i class="icon-github-sign icon-large"></i>github</a></li>

<li class="nav-header"><h4><i class="icon-folder-close icon-large"></i>Categories</h4></li>
<li>
<a href="./category/benchmark.html">
    <i class="icon-folder-open icon-large"></i>benchmark
</a>
</li>
<li>
<a href="./category/compilation.html">
    <i class="icon-folder-open icon-large"></i>compilation
</a>
</li>
<li>
<a href="./category/cython.html">
    <i class="icon-folder-open icon-large"></i>cython
</a>
</li>
<li>
<a href="./category/engineering.html">
    <i class="icon-folder-open icon-large"></i>engineering
</a>
</li>
<li>
<a href="./category/examples.html">
    <i class="icon-folder-open icon-large"></i>examples
</a>
</li>
<li>
<a href="./category/optimisation.html">
    <i class="icon-folder-open icon-large"></i>optimisation
</a>
</li>
<li>
<a href="./category/release.html">
    <i class="icon-folder-open icon-large"></i>release
</a>
</li>

<li class="nav-header"><h4><i class="icon-tags icon-large"></i>Tags</h4></li>


</ul>        </div><!--/.well -->

      </div><!--/row-->

      <hr>

      <footer>
        <address id="about">
                Proudly powered by <a href="http://pelican.notmyidea.org/">Pelican <i class="icon-external-link"></i></a>,
                                which takes great advantage of <a href="http://python.org">Python <i class="icon-external-link"></i></a>.
        </address><!-- /#about -->

        <p>The theme is from <a href="http://twitter.github.com/bootstrap/">Bootstrap from Twitter <i class="icon-external-link"></i></a>,
                   and <a href="http://fortawesome.github.com/Font-Awesome/">Font-Awesome <i class="icon-external-link"></i></a>, thanks!</p>
      </footer>

    </div><!--/.fluid-container-->



    <!-- Le javascript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="./theme/js/jquery-1.7.2.min.js"></script>
    <script src="./theme/js/bootstrap.min.js"></script>
  </body>
</html>